\begin{circuitikz}
    \tikzset{every node/.style={align=center}}
    % cell outline
    \draw[fill=green!10, rounded corners=15pt](1, -3) rectangle (11, 3);

    % nodes
    \node (x) at (-1,0) {\(x\)};
    \node[rectangle, draw, text width=2.5cm, inner sep=5mm] (gates) at (4, 0) 
    {Méchanisme de contrôle à base de portes};
    \node[circle, draw] (state) at (8, 0) {\(h\)};
    \node (h) at (13, 0) {\(h\)};
    

    % connections
    \draw[-{Latex}] (x) to (gates);
    \draw[-{Latex}] (gates.north) |- (8, 2) to (state.north);
    \draw[-{Latex}] (state) to ++(0, -2) to ($(gates) +(0, -2)$) to (gates.south);
    \draw[-{Latex}] (state) to (h);
\end{circuitikz} 